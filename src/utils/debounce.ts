import { RESIZE_DELAY } from '@cve-ts/dictionary'

let timer: NodeJS.Timeout | null = null

export const debounce = (
  callback: () => void,
  delay: number = RESIZE_DELAY,
  immediate: boolean = false
) => () => {
  if (timer) {
    clearTimeout(timer)
  }
  if (immediate) {
    callback()
  }

  timer = setTimeout(() => {
    if (!immediate) {
      callback()
    }
    timer = null
  }, delay)
}
