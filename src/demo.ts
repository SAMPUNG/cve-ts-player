import { emitUIInteraction } from './liaison/emitter'
import { player } from './player/custom-element'
import { definePlayer } from './player/web-component'

definePlayer()

const fly = () => {
  setTimeout(() => {
    const Data = {
      ArmLength: 182103.671875,
      Duration: 3,
      Location: [-150933.81522, -23069.396282, 25299.628117],
      Rotation: [0, -25.206932, -68.69767],
    }
    emitUIInteraction({ Command: 'FlyTo', Data })
  }, 1000 * 3)
}

const render = (evt: CustomEvent<unknown>) => {
  console.log('connect ===> ', evt.detail)
  fly()
}

const log = (evt: CustomEvent<unknown>) => {
  console.log('text ===> ', evt.detail)
}

player?.addEventListener('connect', render)
player?.addEventListener('text', log)
